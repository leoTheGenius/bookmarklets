(function(){
  if(window.gdWave){alert("Already running! Press Esc to remove.");return;}
  window.gdWave = true;

  // Setup canvas
  const c = document.createElement("canvas");
  const x = c.getContext("2d");
  const W = 400, H = 200;
  c.width = W; c.height = H;
  Object.assign(c.style,{
    position:"fixed",top:"10px",left:"10px",
    zIndex:9999999,border:"2px solid cyan",
    background:"#000",borderRadius:"8px"
  });
  document.body.appendChild(c);

  // Game state
  let y = H/2;
  let dir = -1; // -1 = down, 1 = up
  let press = false;
  let t = 0;
  let speed = 3;
  let waveSlope = 3; // diagonal speed multiplier
  let obs = [];
  let loopId;

  function addObs(){
    const g = 60 + 40*Math.random();
    const top = Math.random()*(H - g - 20);
    obs.push({x: W, top: top, gap: g});
  }

  function update(){
    t++;
    if(t % 60 === 0) addObs();
    // Wave movement â€” sharp flips, no acceleration
    y += dir * waveSlope;
    obs.forEach(o => o.x -= speed);
    while(obs.length && obs[0].x + 20 < 0) obs.shift();

    // Bounds
    if(y < 0) y = 0;
    if(y > H) y = H;
  }

  function draw(){
    x.fillStyle = "#000";
    x.fillRect(0, 0, W, H);

    // Player (triangle wave)
    x.fillStyle = "#0ff";
    x.beginPath();
    x.moveTo(20, y);
    x.lineTo(30, y - 6);
    x.lineTo(30, y + 6);
    x.closePath();
    x.fill();

    // Obstacles
    x.fill
